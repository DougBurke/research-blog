---
title: Sanity checks
author: Douglas Burke
date: 24 October 2012
---

Before extracting spectra, let's do some sanity checks.

## Background flares

Chandra observations can be affected by "background flares";
that is periods of time when the particle background is not
constant (for more information see the
[ACIS Background Memos page](http://cxc.harvard.edu/cal/Acis/Cal_prods/bkgrnd/current/)
from the 
[Calibration team](http://cxc.harvard.edu/cal/)). This flaring need
not be a problem for analysis of bright pint sources, but as we
are interested in faint, extended emission it is worth checking
the high-energy light curve for signs of variability.

Since ACIS has essentially no sensitivity above 9 keV, we chose to
look at the 10 to 12 keV data, which is created by the particle
background, for the ACIS-I0 and ACIS-I2 chips (these are the two
that lie close to the group).

~~~
% punlearn dmextract
% dmextract "1655/repro/acisf01655_repro_evt2.fits[ccd_id=0,2,energy=10000:12000][bin time=::500]" qbg.lc opt=ltc1
% dmlist qbg.lc cols
 
--------------------------------------------------------------------------------
Columns for Table Block LIGHTCURVE
--------------------------------------------------------------------------------
 
ColNo  Name                 Unit        Type             Range
   1   TIME_BIN             channel      Int4           1:45                 S/C TT corresponding to mid-exposure
   2   TIME_MIN             s            Real8          97141592.4202499986: 97163977.9086109996 Minimum Value in Bin
   3   TIME                 s            Real8          97141592.4202499986: 97163977.9086109996 S/C TT corresponding to mid-exposure
   4   TIME_MAX             s            Real8          97141592.4202499986: 97163977.9086109996 Maximum Value in Bin
   5   COUNTS               count        Int4           -                    Counts
   6   STAT_ERR             count        Real8          0:+Inf               Statistical error
   7   AREA                 pixel**2     Real8          -Inf:+Inf            Area of extraction
   8   EXPOSURE             s            Real8          -Inf:+Inf            Time per interval
   9   COUNT_RATE           count/s      Real8          0:+Inf               Rate
  10   COUNT_RATE_ERR       count/s      Real8          0:+Inf               Rate Error
 
--------------------------------------------------------------------------------
World Coord Transforms for Columns in Table Block LIGHTCURVE
--------------------------------------------------------------------------------
 
ColNo    Name
2:    DT_MIN               = +0 [s] +1.0 * (TIME_MIN  -97141842.420250)
3:    DT                   = +0 [s] +1.0 * (TIME  -97141842.420250)
4:    DT_MAX               = +0 [s] +1.0 * (TIME_MAX  -97141842.420250)
~~~

Plotting up the count rate gives us the following (since I use the
"virtual" columns `DT_MIN` and `DT_MAX` to plot up the time since the
start of the observation, I have to work around a bug in Crates
in CIAO 4.4 which means the data needs to be re-shaped to exclude
garbage values):

~~~
% chips
-----------------------------------------
Welcome to ChIPS: CXC's Plotting Package
-----------------------------------------
CIAO 4.4 ChIPS version 1 Tuesday, June 5, 2012

chips-1> cr = read_file("qbg.lc")
chips-2> xlo = cr.get_column("dt_min").values
chips-3> xhi = cr.get_column("dt_max").values
chips-4> xlo.shape
         (45, 2)
chips-5> xlo = xlo.reshape(45*2)[:45]
chips-6> xhi = xhi.reshape(45*2)[:45]
chips-7> y = cr.get_column("count_rate").valueschips-8> dy = cr.get_column("count_rate_err").values
chips-9> add_window(8, 5, "inches")
chips-10> add_histogram(xlo, xhi, y, dy)
chips-11> set_plot_xlabel(r"\Delta T (s)")
chips-12> set_plot_ylabel("Count rate (s^{-1])")
chips-13> set_plot_title("10 - 12 keV lightcurve for ACIS-I0,I2")
chips-14> set_axis("all", ["label.size", 20, "ticklabel.size", 16])
chips-15> set_plot(["title.size", 20])
chips-16> set_plot_ylabel("Count rate (s^{-1})")
chips-17> print_qindow('qbg.png')
NameError: name 'print_qindow' is not defined
chips-18> print_window('qbg.png')
chips-19> quit()
~~~

![The light curve of the 10 to 12 keV particles in the ACIS-I0 and I2 chips looks consistent.](/images/qbg.png)

